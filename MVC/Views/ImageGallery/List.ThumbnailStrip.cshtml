@model Telerik.Sitefinity.Frontend.Mvc.Models.ContentListViewModel

@using Telerik.Sitefinity.Frontend.Mvc.Models;
@using System.Web.Script.Serialization;
@using Telerik.Sitefinity.Frontend.Media.Mvc.Helpers;
@using Telerik.Sitefinity.Frontend.Media.Mvc.Models.ImageGallery;
@using Telerik.Sitefinity.Frontend.Mvc.Helpers;
@using Telerik.Sitefinity.Modules.Pages;
@using Telerik.Sitefinity.Services;
@using System.Linq;

<div class="photo-gallery-thumbs">
    @for (int i = 0; i < Model.Items.Count(); i++) {
      var item = Model.Items.ElementAt(i);
      var itemIndex = (Model.CurrentPage - 1) * ViewBag.ItemsPerPage + i + 1;
      var detailPageUrl = ViewBag.OpenInSamePage ? HyperLinkHelpers.GetDetailPageUrl(item, ViewBag.DetailsPageId, ViewBag.OpenInSamePage, itemIndex) :
            HyperLinkHelpers.GetDetailPageUrl(item, ViewBag.DetailsPageId, ViewBag.OpenInSamePage);

        <div class="photo-gallery-item  @Model.CssClass">
          <img src="@(((ThumbnailViewModel)item).ThumbnailUrl)" alt='@System.Text.RegularExpressions.Regex.Replace(item.Fields.AlternativeText, @"[^\w\d_-]", "")' />
        </div>
      }
</div>
<div class="photo-thumbs">
    @for (int i = 0; i < Model.Items.Count(); i++) {
      var item = Model.Items.ElementAt(i);
      var itemIndex = (Model.CurrentPage - 1) * ViewBag.ItemsPerPage + i + 1;
      var detailPageUrl = ViewBag.OpenInSamePage ? HyperLinkHelpers.GetDetailPageUrl(item, ViewBag.DetailsPageId, ViewBag.OpenInSamePage, itemIndex) :
            HyperLinkHelpers.GetDetailPageUrl(item, ViewBag.DetailsPageId, ViewBag.OpenInSamePage);
			
        <div class="photo-gallery-item" style='background-image: url(@(((ThumbnailViewModel)item).ThumbnailUrl));'>
          <span>@System.Text.RegularExpressions.Regex.Replace(item.Fields.AlternativeText, @"[^\w\d_-]", "")' </span>
        </div>
      }
</div>

@if (Model.ShowPager) {
    @Html.Action("Index", "ContentPager", new {
           currentPage = Model.CurrentPage, totalPagesCount = Model.TotalPagesCount.Value, redirectUrlTemplate = ViewBag.RedirectPageUrlTemplate
       })
}
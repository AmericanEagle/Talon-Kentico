@model Telerik.Sitefinity.Frontend.Mvc.Models.ContentDetailsViewModel

@using Telerik.Sitefinity.Frontend.Mvc.Helpers;
@using Telerik.Sitefinity.Web.DataResolving;
@using SitefinityWebApp.Mvc.Helpers;

@* @Html.Script(ScriptRef.JQuery, "top", false)*@

@{
    var newsItem = @Model.Item;
    var newsFields = newsItem.Fields;
}

<article class="news module detail @Model.CssClass">
    <header class="header">
        <h1 class="title">@newsFields.Title</h1>

        <ul class="meta">
            <li class="meta-item author">
                @Html.Resource("By")
                <span>@DataResolver.Resolve(@newsItem.DataItem, "Author", null)</span>
            </li>

            <li class="meta-item date">
                @newsItem.GetDateTime("PublicationDate", "MMM d, yyyy, HH:mm tt")
            </li>

            <li class="meta-item comment-count">
                @Html.CommentsCount(string.Empty, @newsItem.DataItem)
            </li>
        </ul>
    </header>

    @*<div property="description">@Html.Raw(newsFields.Fields.Summary)</div>*@

    <div class="content">
        @if(@newsFields.Image != null) {
            <figure class="aside">
                <img src="@newsFields.Image.Fields.MediaUrl" alt="@newsFields.Image.Fields.AlternativeText" />
            </figure>
        }

        <div>@Html.HtmlSanitize((string)newsFields.Content)</div>
    </div>

    @{
        if (Model.EnableSocialSharing) {
            var item = Model.Item.DataItem as Telerik.Sitefinity.Model.IHasTitle;
            @Html.SocialShareOptions(item);
        }
    }

    @Html.CommentsList(@newsItem.DataItem)
</article>

@* Schema / json-ld *@
<script type="application/ld+json">
{
"@@context": "http://schema.org",
"@@type": "article",
"@@id": "@newsItem.DefaultUrl",
"mainEntityOfPage": {
    "@@type": "WebPage",
    "@@id": "@newsItem.DefaultUrl"
},
"headline": "@newsFields.Title",
"datePublished": "@newsItem.GetDateTime("PublicationDate", "MMM d, yyyy, HH:mm tt")",
"dateModified": "@newsItem.GetDateTime("LastModified", "MMM d, yyyy, HH:mm tt")",
"author": {
    "@@type": "Person",
    "name": "@DataResolver.Resolve(@newsItem.DataItem, "Author", null)"
},

@* Add site name and logo, and uncomment this out.
"publisher": {
    "@@type": "Organization",
    "name": "Google",
    "logo": {
        "@@type": "ImageObject",
        "url": "https://google.com/logo.jpg"
    }
},
*@

"description": "@newsFields.Summary"
}
</script>

@if(@newsFields.Image != null) {
<script type="application/ld+json">
{
"@@context": "http://schema.org",
"@@id": "@newsItem.DefaultUrl",
"image": "@newsFields.Image.Fields.MediaUrl"
}
</script>
}